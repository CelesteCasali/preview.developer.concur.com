---
title: Localities V5
layout: reference
---

{% include prerelease.html %}

# Localities V5

The Localities V5 API acts as a single source of truth for location-related information, including countries, subdivisions, and specific localities. It enables consistent and reliable data access across multiple business functions and partner systems.

## Prior Versions

* Locations v3 documentation is available [here](https://developer.concur.com/api-reference/common/locations/v3.locations.html)

## <a name="limitations"></a>Limitations

Access to this documentation does not provide access to the API. The API is available only in US2, EU2, APJ1, CCPS, and China data centers.

## <a name="sequence-diagram"></a>Sequence Diagram

A high-level diagram of the Localities Service flow, showing how clients retrieve locality data via endpoints.

![Sequence Diagram for Localities](V5_Sequence_Diagram.png)

## <a name="products-editions"></a>Products and Editions

* Concur Expense Professional Edition
* Concur Expense Standard Edition
* Concur Travel Allowance Professional Edition
* Concur Travel Allowance Standard Edition
* Concur Invoice Professional Edition
* Concur Invoice Standard Edition
* Concur Request Professional Edition
* Concur Request Standard Edition

## <a name="scope-usage"></a>Scope Usage

Name| Description             |Endpoint
---|-------------------------|---
`locality.read`| getCountries            |`GET `
`locality.read`| getCountryByCode        |`GET `
`locality.read`| getLocations            |`GET `
`locality.read`| getLocationByLocalityId |`GET `
`locality.read`| getSubdivisions         |`GET `

## <a name="dependencies"></a>Dependencies

EMT (Expense Mid Tier).U

## <a name="access-token-usage"></a>Access Token Usage

Customer/Partner Applications should be able to process this API via API Gateway and Concur Internal services using X509 service certs. For internal calls via X509 Certs, `concur-companyid` header is mandatory but not via API Gateway calls as it can be retrieved from JWT.

---

## <a name="endpoints"></a>Endpoints

### 1. GetCountries

Retrieve countries list along with currency codes.

#### Scopes

`locality.read` - Refer to [Scope Usage](#scope-usage) for full details.

#### URI

```shell
GET https://{region}.api.concursolutions.com/localities/v5/countries
```

#### Parameters

None

#### Payloads

* Request: None
* Response: [`CountryListResponse`](#CountryListResponse-schema)

#### Examples

##### Request
```shell
GET https://us2.api.concursolutions.com/localities/v5/countries
Accept: application/json 
Accept-Language: en 
Authorization: Bearer ${ACCESS_TOKEN} 
```
##### Response

```shell
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "countries": [
    {
      "code": "AF",
      "active": true,
      "names": [
        {
          "name": "AFGHANISTAN",
          "langCode": "en"
        }
      ],
      "currencies": [
        {
          "code": "AFN"
        }
      ],
      "links": [
        {
          "rel": "self",
          "href": "https://us2.api.concursolutions.com/localities/v5/countries/AF"
        }
      ]
    }
  ]
}
```

---

### 2. GetCountryByCode

Retrieve country details given a country code.

#### Scopes

`locality.read` - Refer to [Scope Usage](#scope-usage) for full details.

#### URI

```shell
GET https://{region}.api.concursolutions.com/localities/v5/countries/{countryCode}
```

#### Parameters

Name|Type|Format|Description
---|---|---|---
`countryCode`|`string`|-|**Required** Two letter ISO countryCode.

#### Payloads

* Request: None
* Response: [`CountryByCodeResponse`](#CountryByCodeResponse-schema)

#### Examples

##### Request
```shell
GET https://us2.api.concursolutions.com/localities/v5/countries/AF
Accept: application/json 
Accept-Language: en 
Authorization: Bearer ${ACCESS_TOKEN}
```

##### Response

```shell
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "code": "AF",
  "active": true,
  "numCode": 826,
  "alpha3Code": "GBR",
  "distanceUnitCode": "MILE",
  "names": [
    {
      "name": "AFGHANISTAN",
      "langCode": "en"
    }
  ],
  "currencies": [
    {
      "code": "AFN"
    }
  ],
  "links": [
    {
      "rel": "self",
      "href": "https://us2.api.concursolutions.com/localities/v5/countries/AF"
    }
  ]
}
```

---

### 3. GetLocations

Return details of a locality given a legacy `Location Name Key`/`Locality Code`/`Location Name Id` or matching the given `search text` for a given company.

#### Scopes

`locality.read` - Refer to [Scope Usage](#scope-usage) for full details.

#### URI

```shell
GET https://{region}.api.concursolutions.com/localities/v5/locations?locationNameKey={}&locationNameId={}&locCode={}&searchText={}

Fetches locality data based on query parameters. 
```

#### Parameters
Only one of these paramater at a time is required- locationNameKey, locationNameId, locCode, or searchText.

Parameter| Type|Required|Condition|Description
---|-----|----|----|---
`locationNameKey`| `Integer` | !Conditional | Required if others (locationNameId,locCode or searchText ) not present |Unique key for the location name 
`locationNameId`| `String` | !Conditional | Required if others (locationNameKey,locCode or searchText ) not present |UUID identifier of the location name 
`locCode`| `String` | !Conditional | Required if others (locationNameKey,locationNameId or searchText ) not present |Location code
`searchText`| `String` | !Conditional | Required if others (locationNameKey,locCode or locationNameId ) not present |Free-text for location search
`adminRegionId `| `String` | Optional | Only valid with searchText |Filter by adminRegionId
`countryCode`| `String` | Optional | Only valid with searchText |ISO country code 
`subdivisionCode`| `String` | Optional | Only valid with searchText |Subdivision (e.g., state, province) code

#### Payloads

* Request: None
* Response: [`LocationListResponse`](#LocationListResponse-schema)

#### Examples

##### Request
```shell
GET https://us2.api.concursolutions.com/localities/v5/locations?locCode=DEMUC
Accept: application/json 
Accept-Language: en 
Authorization: Bearer ${ACCESS_TOKEN}
```

##### Respone

```shell
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "locations": [
    {
      "legacyKey": 5616,
      "code": "DEMUC",
      "id": "0c3f69f8-8867-4fad-9bc9-ade77fc05683",
      "timeZoneOffset": 60,
      "active": true,
      "point": {
        "latitude": 48.15,
        "longitude": 11.583333
      },
      "names": [
        {
          "id": "dff1ef47-b11b-114d-aed4-929e3c5d73d7",
          "name": "Munich",
          "legacyKey": 5705,
          "active": true,
          "langCode": "en"
        }
      ],
      "administrativeRegion": {
        "id": "adminRegionId",
        "names": [
          {
            "name": "BEDFORD COUNTY",
            "langCode": "en"
          }
        ],
        "countryCode": "US",
        "subDivCode": "US-TX",
        "links": [
          {
            "rel": "self",
            "href": "https://us2.api.concursolutions.com/localities/v5/adminRegions/3b353fe3-5e4d-4a7a-8230-8eb44db254d0"
          }
        ]
      },
      "country": {
        "code": "US",
        "names": [
          {
            "name": "USA",
            "langCode": "en"
          }
        ],
        "links": [
          {
            "rel": "self",
            "href": "https://us2.api.concursolutions.com/localities/v5/countries/US"
          }
        ]
      },
      "subDivision": {
        "code": "US-TX",
        "names": [
          {
            "name": "Texas",
            "langCode": "en"
          }
        ],
        "links": [
          {
            "rel": "self",
            "href": "https://us2.api.concursolutions.com/localities/v5/subDivisions/US-TX"
          }
        ]
      },
      "links": [
        {
          "rel": "self",
          "href": "https://us2.api.concursolutions.com/localities/v5/locations/0c3f69f8-8867-4fad-9bc9-ade77fc05683"
        }
      ]
    }
  ]
}
```

---

### 4. GetLocationByLocalityId

Return location details given a Locality Id for a given company.

#### Scopes

`locality.read` - Refer to [Scope Usage](#scope-usage) for full details.

#### URI

```shell
GET https://{region}.api.concursolutions.com/localities/v5/locations/{localityId}
```

#### Parameters

Name|Type|Format|Description
---|---|---|---
`localityId`|`string`|-|**Required** Valid UUID of the Locality.

---

#### Payloads

* Request: None
* Response: [`LocationDetailsResponse`](#LocationDetailsResponse-schema)

#### Examples

##### Request
```shell
GET https://us2.api.concursolutions.com/localities/v5/locations/0c3f69f8-8867-4fad-9bc9-ade77fc05683
Accept: application/json 
Accept-Language: en 
Authorization: Bearer ${ACCESS_TOKEN}
```

##### Response

```shell
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "legacyKey": 5616,
  "code": "DEMUC",
  "id": "0c3f69f8-8867-4fad-9bc9-ade77fc05683",
  "timeZoneOffset": 60,
  "active": true,
  "point": {
    "latitude": 48.15,
    "longitude": 11.583333
  },
  "names": [
    {
      "id": "dff1ef47-b11b-114d-aed4-929e3c5d73d7",
      "name": "Munich",
      "legacyKey": 5705,
      "active": true,
      "langCode": "en"
    }
  ],
  "administrativeRegion": {
    "id": "adminRegionId",
    "names": [
      {
        "name": "BEDFORD COUNTY",
        "langCode": "en"
      }
    ],
    "countryCode": "US",
    "subDivCode": "US-TX",
    "links": [
      {
        "rel": "self",
        "href": "https://us2.api.concursolutions.com/localities/v5/adminRegions/3b353fe3-5e4d-4a7a-8230-8eb44db254d0"
      }
    ]
  },
  "country": {
    "code": "US",
    "names": [
      {
        "name": "USA",
        "langCode": "en"
      }
    ],
    "links": [
      {
        "rel": "self",
        "href": "https://us2.api.concursolutions.com/localities/v5/countries/US"
      }
    ]
  },
  "subDivision": {
    "code": "US-TX",
    "names": [
      {
        "name": "Texas",
        "langCode": "en"
      }
    ],
    "links": [
      {
        "rel": "self",
        "href": "https://us2.api.concursolutions.com/localities/v5/subDivisions/US-TX"
      }
    ]
  },
  "links": [
    {
      "rel": "self",
      "href": "https://us2.api.concursolutions.com/localities/v5/locations/0c3f69f8-8867-4fad-9bc9-ade77fc05683"
    }
  ]
}

```
---

### 5. GetSubdivisions

Retrieve list of subdivisions given country code.

#### Scopes

`locality.read` - Refer to [Scope Usage](#scope-usage) for full details.

#### URI

```shell
GET https://{region}.api.concursolutions.com/localities/v5/subdivisions?countryCode={countryCode}
```
#### Parameters

Name|Type|Format|Description
---|---|---|---
`countryCode`|`string`|-|**Required** Two letter ISO countryCode.

#### Payloads

* Request: None
* Response: [`SubdivisionListResponse`](#SubdivisionListResponse-schema)


#### Examples

##### Request
```shell
GET https://us2.api.concursolutions.com/localities/v5/subdivisions?countryCode=AU
Accept: application/json 
Accept-Language: en 
Authorization: Bearer ${ACCESS_TOKEN}
```

##### Response

```shell
HTTP/1.1 200 OK
Content-Type: application/json
```

```json
{
  "subdivisions": [
    {
      "code": "AU-QLD",
      "active": true,
      "names": [
        {
          "name": "Queensland",
          "langCode": "en"
        }
      ],
      "countryCode": "AU",
      "links": [
        {
          "rel": "self",
          "href": "https://us2.api.concursolutions.com/localities/v5/subDivisions/AU-QLD"
        },
        {
          "rel": "country",
          "href": "https://us2.api.concursolutions.com/localities/v5/countries/AU"
        }
      ]
    }
  ]
}
```

---

## <a name="schema"></a>Localities V5 Schemas

### LocationListResponse Schema

Name| Type| Format                                                                         |Description
---|-----|--------------------------------------------------------------------------------|---
`Locations`| `List` | [`LocationDetailsResponse Schema`](#LocationDetailsResponse-schema)            |All active locations for the given company Id.

### LocationDetailsResponse Schema
Name| Type      | Format                                                                        |Description
---|-----------|-------------------------------------------------------------------------------|---
`legacyKey`| `integer` | -                                                                             |Numeric Identifier for the location.
`code`| `string`  | -                                                                             |Location code.
`id`| `string`  | -                                                                             |Unique Identifier of the location.
`timeZoneOffset`| `integer` | -                                                                             |Time zone offset of the location (in minutes).
`active`| `boolean` | true/false                                                                    |Whether the location is active.
`point`| `object`  | [`Point Schema`](#Point-schema)                                               |Geographical coordinates of the location.
`names`| `list`    | [`LocationName Schema`](#LocationName-schema)                                 |Names for the location.
`administrativeRegion`| `object`  | [`AdministrativeRegionResponse Schema`](#AdministrativeRegionResponse-schema) |Administrative region details of the location.
`country`| `object`  | [`Code Schema`](#Code-schema)                                                 |Country associated with the location.
`subDivision`| `object`  | [`Code Schema`](#Code-schema)                                                 |Subdivision associated with the location.
`links`| `list`    | [`Link Schema`](#Link-schema)                                                 |Hateoas links related to the location.

### AdminRegionResponse Schema
Name| Type     | Format                        |Description
---|----------|-------------------------------|---
`id`| `string` | -                             |Unique identifier of the admin region.
`names`| `list`   | [`Name Schema`](#Name-schema) |Names for the admin region.
`links`| `list`   | [`Link Schema`](#Link-schema) |Hateoas Links to related resources.
`countryCode`| `string` | -                             |ISO country code.
`subDivCode`| `string` | -                             |Sub-division (state/province code).

### CountryListResponse Schema
Name| Type   | Format                                              |Description
---|--------|-----------------------------------------------------|---
`countries`| `list` | [`CountryCurrency Schema`](#CountryCurrency-schema) |List of countries with their currency details.

### CountryCurrency Schema
Name| Type      | Format                                |Description
---|-----------|---------------------------------------|---
`code`| `string`  | -                                     |ISO country code.
`names`| `list`    | [`Name Schema`](#Name-schema)         |Names for the countries.
`links`| `list`    | [`Link Schema`](#Link-schema)         |Hateoas links related to the country.
`active`| `boolean` | true/false                            |Whether the country is active.
`currencies`| `list`    | [`Currency Schema`](#Currency-schema) |List of currencies associated with the country.

### Currency Schema
Name| Type      | Format  |Description
---|-----------|------|---
`code`| `string`  | - |ISO currency code.

### CountryByCodeResponse Schema
Name| Type      | Format  |Description
---|-----------|------|---
`code`| `string`  | - |ISO country code.
`names`| `list`    | [`Name Schema`](#Name-schema)  |Names for the countries.
`links`| `list`    | [`Link Schema`](#Link-schema)  |Hateoas links related to the country.
`active`| `boolean` | true/false |Whether the country is active.
`currencies`| `list`    | [`Currency Schema`](#Currency-schema) |List of currencies associated with the country.
`numCode`| `integer` | - |Numeric ISO code of the country.
`alpha3Code`| `string`  | - |ISO Alpha-3 code of the country.
`distanceUnitCode`| `string`  | - |Unit of distance used in the country.

### SubdivisionListResponse Schema
Name| Type   | Format                                      |Description
---|--------|---------------------------------------------|---
`subdivisions`| `list` | [`Subdivision Schema`](#Subdivision-schema) |List of subdivisions for a country.

### Subdivision Schema
Name| Type      | Format  |Description
---|-----------|------|---
`code`| `string`  | - |ISO subdivision code.
`names`| `list`    | [`Name Schema`](#Name-schema) |Names for the subdivisions.
`links`| `list`    | [`Link Schema`](#Link-schema) |Hateoas links related to the subdivision.
`active`| `boolean` | true/false |Whether the subdivision is active.
`countryCode`| `string`  | - |ISO Alpha-2 code of the country.

### Name Schema
Name| Type     | Format  |Description
---|----------|------|---
`name`| `string` | - |The actual name value of location/country/subdivision/adminregion.
`langCode`| `string` | - |Language code of the name.

### Link Schema
Name| Type     | Format  |Description
---|----------|------|---
`rel`| `string` | - |Relation type.
`href`| `string` | - |Hateoas link.

### Code Schema
Name| Type     | Format  |Description
---|----------|------|---
`code`| `string` | - |Unique code identifier for countries/subdivisions.
`names`| `list`   | [`Name Schema`](#Name-schema) |Names for countries/subdivisions.
`links`| `list`   | [`Link Schema`](#Link-schema) |Hateoas links related to countries/subdivisions.

### Point Schema
Name| Type      | Format  |Description
---|-----------|------|---
`latitude`| `double`  | - |Latitude coordinate.
`longitude`| `double`  | - |Longitude coordinate.

### LocationName Schema
Name| Type      | Format  |Description
---|-----------|------|---
`id`| `string`  | - |Unique identifier for the location name.
`legacyKey`| `integer` | - |Numeric identifier for the location.
`active`| `boolean` | true/false |Whether the location is active.
`name`| `string`  | - |Name for the location.
`langCode`| `string`  | - |Language code.


### Error
Name|Type|Format|Description
---|---|---|---
`timestamp`|`string`|`date-time`|**Required** The time when the error was captured.
`status`|`string`|`-`|**Required** The HTTP response code and phrase for the response.
`errorMessage`|`string`|`-`|**Required** The detailed error message.
`path`|`string`|`-`|**Required** The URI of the attempted request.
